{"ast":null,"code":"import { jwtDecode } from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"disabled\": a0\n});\nfunction HeaderComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵtext(2, \"Manage Users\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_13_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(6, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Welcome, \", ctx_r1.userName, \"!\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.userEmail);\n  }\n}\nfunction HeaderComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 9);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(router, authService) {\n      this.router = router;\n      this.authService = authService;\n      this.userName = null;\n      this.userEmail = null;\n      this.isLoggedIn = false;\n      this.userRole = '';\n    }\n    ngOnInit() {\n      // Subscribe to auth status changes\n      // localStorage.removeItem('authToken');\n      this.authService.authStatus$.subscribe(isLoggedIn => {\n        console.log('Auth status changed:', isLoggedIn); // Logging the auth status\n        this.isLoggedIn = isLoggedIn;\n        if (isLoggedIn) {\n          this.updateUserInfo();\n        } else {\n          this.clearUserInfo();\n        }\n      });\n    }\n    updateUserInfo() {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        const decoded = jwtDecode(token);\n        console.log('Decoded token:', decoded); // Logging the decoded token\n        this.userName = decoded.name;\n        this.userEmail = decoded.email;\n        this.userRole = decoded.role || '';\n      } else {\n        console.warn('No token found'); // Warning if no token is present\n      }\n    }\n    navigateToLogin(event) {\n      event.preventDefault();\n      console.error('User not logged in. Redirecting to login page.');\n      this.router.navigate(['/login']); // Redirect to the login page\n    }\n    clearUserInfo() {\n      console.log('Clearing user info'); // Logging when clearing user info\n      this.userName = null;\n      this.userEmail = null;\n    }\n    logout() {\n      console.log('Logging out'); // Logging when logging out\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    static #_ = (() => this.ɵfac = function HeaderComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HeaderComponent,\n      selectors: [[\"app-header\"]],\n      decls: 15,\n      vars: 12,\n      consts: [[1, \"header\"], [\"routerLink\", \"/projects-list\", 3, \"click\", \"ngClass\"], [\"routerLink\", \"/about\", 3, \"click\", \"ngClass\"], [\"routerLink\", \"/contact\", 3, \"click\", \"ngClass\"], [4, \"ngIf\"], [\"class\", \"user-profile\", 4, \"ngIf\"], [\"routerLink\", \"/manage-users\"], [1, \"user-profile\"], [3, \"click\"], [\"routerLink\", \"/login\"]],\n      template: function HeaderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"header\", 0)(1, \"nav\")(2, \"ul\")(3, \"li\")(4, \"a\", 1);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_4_listener($event) {\n            return !ctx.isLoggedIn ? ctx.navigateToLogin($event) : null;\n          });\n          i0.ɵɵtext(5, \" Projects \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"li\")(7, \"a\", 2);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_7_listener($event) {\n            return !ctx.isLoggedIn ? ctx.navigateToLogin($event) : null;\n          });\n          i0.ɵɵtext(8, \" About \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"li\")(10, \"a\", 3);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_10_listener($event) {\n            return !ctx.isLoggedIn ? ctx.navigateToLogin($event) : null;\n          });\n          i0.ɵɵtext(11, \" Contact \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(12, HeaderComponent_li_12_Template, 3, 0, \"li\", 4)(13, HeaderComponent_li_13_Template, 7, 2, \"li\", 5)(14, HeaderComponent_li_14_Template, 3, 0, \"li\", 4);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, !ctx.isLoggedIn));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, !ctx.isLoggedIn));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, !ctx.isLoggedIn));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn && ctx.userRole === \"admin\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgIf, i1.RouterLink],\n      styles: [\".header[_ngcontent-%COMP%]{background-color:#343a40;padding:1rem 2rem;box-shadow:0 2px 4px #0000001a}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;display:flex;padding:0;margin:0}.header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 20px;position:relative}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:500;transition:color .3s ease}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ffc107}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff}.user-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;background-color:#ffc107;border:none;padding:.5rem 1rem;border-radius:5px;color:#343a40;font-weight:600;transition:background-color .3s ease}.user-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0a800}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:10px 0}}a.disabled[_ngcontent-%COMP%]{pointer-events:none;color:gray;text-decoration:none;cursor:not-allowed}\"]\n    }))();\n  }\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
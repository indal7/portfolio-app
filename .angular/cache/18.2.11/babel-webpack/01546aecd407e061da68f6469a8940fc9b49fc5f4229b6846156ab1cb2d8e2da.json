{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../toaster.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ManageUsersComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 3)(1, \"div\", 4)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 5);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ManageUsersComponent_li_4_Template_select_ngModelChange_4_listener($event) {\n      const user_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      i0.ɵɵtwoWayBindingSet(user_r2.role, $event) || (user_r2.role = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function ManageUsersComponent_li_4_Template_select_change_4_listener() {\n      const user_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.updateUserRole(user_r2.id, user_r2.role));\n    });\n    i0.ɵɵelementStart(5, \"option\", 6);\n    i0.ɵɵtext(6, \"Admin\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 7);\n    i0.ɵɵtext(8, \"User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 8);\n    i0.ɵɵtext(10, \"NA\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const user_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", user_r2.name, \" (\", user_r2.email, \")\");\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", user_r2.role);\n  }\n}\nexport let ManageUsersComponent = /*#__PURE__*/(() => {\n  class ManageUsersComponent {\n    constructor(http, toasterService) {\n      this.http = http;\n      this.toasterService = toasterService;\n      this.users = [];\n      this.apiUrl = environment.apiUrl;\n    }\n    ngOnInit() {\n      this.getUsers();\n    }\n    getUsers() {\n      this.http.get(`${this.apiUrl}/fetch_all_users`).subscribe(response => {\n        if (response.success) {\n          this.users = response.message.users || [];\n          this.toasterService.success('Users loaded successfully!');\n        } else {\n          this.toasterService.error(response.message || 'Error fetching users.');\n        }\n      }, error => {\n        console.error('Error fetching users:', error);\n        this.toasterService.error('Failed to load users. Please try again.');\n      });\n    }\n    updateUserRole(userId, newRole) {\n      this.http.put(`${this.apiUrl}/users/${userId}/role`, {\n        role: newRole\n      }).subscribe(response => {\n        if (response.success) {\n          this.toasterService.success('User role updated successfully!');\n          this.getUsers(); // Refresh the user list to reflect changes\n        } else {\n          this.toasterService.error(response.message || 'Error updating user role.');\n        }\n      }, error => {\n        console.error('Error updating user role:', error);\n        this.toasterService.error('Failed to update user role. Please try again.');\n      });\n    }\n    static #_ = (() => this.ɵfac = function ManageUsersComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ManageUsersComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ToasterService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ManageUsersComponent,\n      selectors: [[\"app-manage-users\"]],\n      decls: 5,\n      vars: 1,\n      consts: [[1, \"users-container\"], [1, \"users-list\"], [\"class\", \"user-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"user-item\"], [1, \"user-info\"], [3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"admin\"], [\"value\", \"user\"], [\"value\", \"NA\"]],\n      template: function ManageUsersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Manage Users\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"ul\", 1);\n          i0.ɵɵtemplate(4, ManageUsersComponent_li_4_Template, 11, 3, \"li\", 2);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.users);\n        }\n      },\n      dependencies: [i3.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n      styles: [\".users-container[_ngcontent-%COMP%]{padding:20px}.user-item[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;align-items:center}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:10px}\"]\n    }))();\n  }\n  return ManageUsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
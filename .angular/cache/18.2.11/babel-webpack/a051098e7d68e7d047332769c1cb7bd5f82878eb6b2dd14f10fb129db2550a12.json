{"ast":null,"code":"import { jwtDecode } from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../auth.service\";\nfunction HeaderComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_13_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(6, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Welcome, \", ctx_r1.userName, \"!\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.userEmail);\n  }\n}\nfunction HeaderComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 8);\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(router, authService) {\n      this.router = router;\n      this.authService = authService;\n      this.userName = null;\n      this.userEmail = null;\n      this.isLoggedIn = false;\n    }\n    ngOnInit() {\n      // Subscribe to auth status changes\n      // localStorage.removeItem('authToken');\n      this.authService.authStatus$.subscribe(isLoggedIn => {\n        console.log('Auth status changed:', isLoggedIn); // Logging the auth status\n        this.isLoggedIn = isLoggedIn;\n        if (isLoggedIn) {\n          this.updateUserInfo();\n        } else {\n          this.clearUserInfo();\n        }\n      });\n    }\n    updateUserInfo() {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        const decoded = jwtDecode(token);\n        console.log('Decoded token:', decoded); // Logging the decoded token\n        this.userName = decoded.name;\n        this.userEmail = decoded.email;\n      } else {\n        console.warn('No token found'); // Warning if no token is present\n      }\n    }\n    clearUserInfo() {\n      console.log('Clearing user info'); // Logging when clearing user info\n      this.userName = null;\n      this.userEmail = null;\n    }\n    logout() {\n      console.log('Logging out'); // Logging when logging out\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    static #_ = (() => this.ɵfac = function HeaderComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HeaderComponent,\n      selectors: [[\"app-header\"]],\n      decls: 17,\n      vars: 3,\n      consts: [[1, \"header\"], [\"routerLink\", \"/projects-list\"], [\"routerLink\", \"/about\"], [\"routerLink\", \"/contact\"], [\"class\", \"user-profile\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"click\"], [1, \"user-profile\"], [\"routerLink\", \"/login\"]],\n      template: function HeaderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtext(0);\n          i0.ɵɵelementStart(1, \"header\", 0)(2, \"nav\")(3, \"ul\")(4, \"li\")(5, \"a\", 1);\n          i0.ɵɵtext(6, \"Projects\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"li\")(8, \"a\", 2);\n          i0.ɵɵtext(9, \"About\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"li\")(11, \"a\", 3);\n          i0.ɵɵtext(12, \"Contact\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(13, HeaderComponent_li_13_Template, 7, 2, \"li\", 4)(14, HeaderComponent_li_14_Template, 3, 0, \"li\", 5);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(15, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_15_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(16, \"Logout\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵtextInterpolate1(\"isLoggedIn : \", ctx.isLoggedIn, \"\\n\");\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n        }\n      },\n      styles: [\".header[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1rem}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;display:flex}.header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 15px}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center}.user-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer}\"]\n    }))();\n  }\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}